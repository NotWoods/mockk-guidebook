<!DOCTYPE html>
<html lang="en" dir=>

<head>
  <meta name="generator" content="Hugo 0.79.0" />
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Capturing arguments to check them later.">

<title>`ArgumentCaptor` | Migrating from Mockito | MockK Guidebook</title>
<link rel="manifest" href="/mockk-guidebook/manifest.json">
<link rel="icon" href="/mockk-guidebook/favicon.png" sizes="48x48" type="image/png">
<link rel="icon" href="/mockk-guidebook/favicon.svg" sizes="any" type="image/svg+xml">
<link rel="stylesheet" href="/mockk-guidebook/book.min.651919df7aa1ce0061d60b75bd3271b82832fc6146c4278ee598d6bd613c3bfd.css" integrity="sha256-ZRkZ33qhzgBh1gt1vTJxuCgy/GFGxCeO5ZjWvWE8O/0=">
<script defer src="/mockk-guidebook/en.search.min.5c27ea07f31dbdcd1f9d0d0609926695756bd8db049f7fa90bab696fa353e56b.js" integrity="sha256-XCfqB/Mdvc0fnQ0GCZJmlXVr2NsEn3&#43;pC6tpb6NT5Ws="></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  <meta name="monetization" content="$ilp.uphold.com/p2WKq3nJHA8w">
<script defer src="https://media.ethicalads.io/media/client/ethicalads.min.js"></script>
<script defer src='/mockk-guidebook/ads.min.js'></script>
<script defer src='/mockk-guidebook/keys.min.js'></script>

<meta property="og:title" content='`ArgumentCaptor`' />
<meta property="og:site_name" content='MockK Guidebook' />
<meta property="og:type" content="book" />
<meta property="og:image" content='https://notwoods.github.io/mockk-guidebook/cover/mockk-bike-iso.png' />
<meta property="og:image:width" content="1280" />
<meta property="og:image:height" content="640" />
<meta property="og:url" content='https://notwoods.github.io/mockk-guidebook/docs/mockito-migrate/argument-captor/' />

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:creator" content="@Not_Woods">
<meta name="twitter:title" content="`ArgumentCaptor` | MockK Guidebook">
<meta name="twitter:image" content='https://notwoods.github.io/mockk-guidebook/cover/mockk-bike-iso.png'>
<meta name="twitter:description" content="Capturing arguments to check them later.">

</head>

<body dir=>
  <input type="checkbox" class="hidden toggle" id="menu-control" accesskey="*" />
  <input type="checkbox" class="hidden toggle" id="toc-control" accesskey="#" />
  <main class="container flex">
    <aside class="book-menu">
      
  <nav>
<h2 class="book-brand">
  <a href="/mockk-guidebook"><span>MockK Guidebook</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>



<a class="author" href="https://tigeroakes.com">
  <svg xmlns="http://www.w3.org/2000/svg" height="32" viewBox="0 0 80 16">
    <title>Tiger Oakes</title>
    <g class="logo-icon logo-icon--monochrome">
      <g fill="none" stroke="currentColor">
        <rect width="13" height="13" x="1.5" y="1.5"/>
        <circle class="eye" cx="5" cy="6" r="1.5"/>
        <circle class="eye" cx="11" cy="6" r="1.5"/>
        <path d="M4.5,7.5v3.5l2.5,1.5m4.5,-4.9v3.4l-2.5,1.5"/>
      </g>
      <path fill="currentColor" d="M8,10.6l1.5,-1.6h-3l1.5,1.6Z"/>
    </g>
    <g class="logo-icon logo-icon--color">
      <rect width="12" height="12" x="2" y="2" fill="#e67237"/>
      <g class="logo-path" fill="none" stroke="#032030">
        <circle class="eye" cx="5" cy="6" r="1.5"/>
        <circle class="eye" cx="11" cy="6" r="1.5"/>
        <path d="M4.5,7.5v3.5l2.5,1.5m4.5,-4.9v3.4l-2.5,1.5"/>
      </g>
      <path fill="#032030" d="M8,10.6l1.5,-1.6h-3l1.5,1.6Z"/>
    </g>
    <clipPath id="i">
      <path d="M29 8v6h-3V8h3zm0-1h-3V5h3v2z"/>
    </clipPath>
    <g class="text" fill="none" stroke="currentColor" opacity="0.5">
      <path d="M23.5 13V7l-.5-.5h-3l-.5-.5V5l.5-.5h7"/>
      <path d="M28 13l-.5-.5V6" clip-path="url(#i)"/>
      <path d="M32.5,12.5h-2.5l-.5,-.5v-4l.5,-.5h3l.5,.5v7l-.5,.5h-3l-.5,-.5"/>
      <path d="M36.5,10h2l.5,-.5v-1.5l-.5,-.5h-2.5l-.5,.5v4l.5,.5h2.5l.5,-.5"/>
      <path d="M40.5,7.5l.5,.5v4l.5,.5h.5l.5,-.5v-4l.5,-.5h1.5l.5,.5"/>
      <path d="M55.5,12.5h-4.5l-.5,-.5v-7l.5,-.5h4l.5,.5v6"/>
      <path d="M57.5,8l.5,-.5h3l.5,.5v4l-.5,.5h-3l-.5,-.5v-2l.5,-.5h2"/>
      <path d="M63,13l.5,-.5v-8.5"/>
      <path d="M66.5,6v2l-.5,.5h-.5l-.5,.5v1l.5,.5h2l.5,.5v2"/>
      <path d="M71,10h2l.5,-.5v-1.5l-.5,-.5h-2.5l-.5,.5v4l.5,.5h2.5l.5,-.5"/>
      <path d="M75.5,12l.5,.5h3l.5,-.5v-1.5l-.5,-.5h-3l-.5,-.5v-1.5l.5,-.5h3l.5,.5"/>
    </g>
    <g class="text text-over" fill="none" stroke="currentColor">
      <path style="animation-delay:0.2s" d="M23.5 13V7l-.5-.5h-3l-.5-.5V5l.5-.5h7"/>
      <path style="animation-delay:0.5s" d="M28 13l-.5-.5V6" clip-path="url(#i)"/>
      <path style="animation-delay:0.8s" d="M32.5,12.5h-2.5l-.5,-.5v-4l.5,-.5h3l.5,.5v7l-.5,.5h-3l-.5,-.5"/>
      <path style="animation-delay:1.1s" d="M36.5,10h2l.5,-.5v-1.5l-.5,-.5h-2.5l-.5,.5v4l.5,.5h2.5l.5,-.5"/>
      <path style="animation-delay:1.4s" d="M40.5,7.5l.5,.5v4l.5,.5h.5l.5,-.5v-4l.5,-.5h1.5l.5,.5"/>
      <path style="animation-delay:0.2s" d="M55.5,12.5h-4.5l-.5,-.5v-7l.5,-.5h4l.5,.5v6"/>
      <path style="animation-delay:0.5s" d="M57.5,8l.5,-.5h3l.5,.5v4l-.5,.5h-3l-.5,-.5v-2l.5,-.5h2"/>
      <path style="animation-delay:0.8s" d="M63,13l.5,-.5v-8.5"/>
      <path style="animation-delay:1.1s" d="M66.5,6v2l-.5,.5h-.5l-.5,.5v1l.5,.5h2l.5,.5v2"/>
      <path style="animation-delay:1.4s" d="M71,10h2l.5,-.5v-1.5l-.5,-.5h-2.5l-.5,.5v4l.5,.5h2.5l.5,-.5"/>
      <path style="animation-delay:1.7s" d="M75.5,12l.5,.5h3l.5,-.5v-1.5l-.5,-.5h-3l-.5,-.5v-1.5l.5,-.5h3l.5,.5"/>
    </g>
  </svg>
</a>








  <ul>
<li>
  <a href="/mockk-guidebook/docs/getting-started/">Getting Started</a>
<ul>
<li>
  <a href="/mockk-guidebook/docs/getting-started/why-mocking/">Why use mocks</a></li>
<li>
  <a href="/mockk-guidebook/docs/getting-started/why-mockk/"><del>Why MockK</del></a></li>
</ul>
</li>
<li>
  <a href="/mockk-guidebook/docs/quick/android/">Android Quickstart</a></li>
<li>
  <a href="/mockk-guidebook/docs/mocking/"><strong>Mocking</strong></a>
<ul>
<li>
  <a href="/mockk-guidebook/docs/mocking/stubbing/">Stub out behaviour</a></li>
<li>
  <a href="/mockk-guidebook/docs/mocking/verify/">Verify that functions were called</a></li>
<li>
  <a href="/mockk-guidebook/docs/mocking/relax/">Automatically stub by relaxing</a></li>
<li>
  <a href="/mockk-guidebook/docs/mocking/spy/">Spy on existing classes</a></li>
<li>
  <a href="/mockk-guidebook/docs/mocking/coroutines/">Coroutines and suspend functions</a></li>
<li>
  <a href="/mockk-guidebook/docs/mocking/constructor/">Mock constructors in code you don&rsquo;t own</a></li>
<li>
  <a href="/mockk-guidebook/docs/mocking/static/">Mock singleton objects and static methods</a></li>
<li>
  <a href="/mockk-guidebook/docs/mocking/extension/">Mock top-level and extension functions</a></li>
<li>
  <a href="/mockk-guidebook/docs/mocking/clear/"><del>Clear state</del></a></li>
<li>
  <a href="/mockk-guidebook/docs/mocking/annotation/">Create many mocks quickly with annotations</a></li>
<li>
  <a href="/mockk-guidebook/docs/mocking/hierarchies/"><del>Chain mocks into hierarchies</del></a></li>
<li>
  <a href="/mockk-guidebook/docs/mocking/answers/">Create more complicated answers for stubs</a></li>
</ul>
</li>
<li>
  <a href="/mockk-guidebook/docs/matching/"><strong>Argument matching</strong></a>
<ul>
<li>
  <a href="/mockk-guidebook/docs/matching/equal/"><del>Check equality</del></a></li>
<li>
  <a href="/mockk-guidebook/docs/matching/any/"><del>Allow any argument</del></a></li>
<li>
  <a href="/mockk-guidebook/docs/matching/oftype/"><del>Argument of a certain type</del></a></li>
<li>
  <a href="/mockk-guidebook/docs/matching/with/">Assertions with an argument</a></li>
<li>
  <a href="/mockk-guidebook/docs/matching/custom/">Custom matching functions</a></li>
<li>
  <a href="/mockk-guidebook/docs/matching/capture/"><del>Capture arguments to check later</del></a></li>
<li>
  <a href="/mockk-guidebook/docs/matching/vararg/"><del>Variable arguments</del></a></li>
<li>
  <a href="/mockk-guidebook/docs/matching/compareto/">Comparables</a></li>
<li>
  <a href="/mockk-guidebook/docs/matching/combine/"><del>Combine matchers</del></a></li>
</ul>
</li>
<li>
  <a href="/mockk-guidebook/docs/mockito-migrate/"><strong>Migrating from Mockito</strong></a>
<ul>
<li>
  <a href="/mockk-guidebook/docs/mockito-migrate/create-mock/">Create a mock</a></li>
<li>
  <a href="/mockk-guidebook/docs/mockito-migrate/when/"><code>when</code> and <code>do*</code></a></li>
<li>
  <a href="/mockk-guidebook/docs/mockito-migrate/eq/"><code>eq</code></a></li>
<li>
  <a href="/mockk-guidebook/docs/mockito-migrate/any/"><code>any*</code></a></li>
<li>
  <a href="/mockk-guidebook/docs/mockito-migrate/verify/"><code>verify</code></a></li>
<li>
  <a href="/mockk-guidebook/docs/mockito-migrate/arg-that/"><code>argThat</code></a></li>
<li>
  <a href="/mockk-guidebook/docs/mockito-migrate/argument-captor/"class=active><code>ArgumentCaptor</code></a></li>
<li>
  <a href="/mockk-guidebook/docs/mockito-migrate/void/"><code>void</code> methods</a></li>
</ul>
</li>
<li>
  <a href="/mockk-guidebook/docs/tips/"><strong>Tips</strong></a>
<ul>
<li>
  <a href="/mockk-guidebook/docs/tips/unit/">Return <code>Unit</code></a></li>
<li>
  <a href="/mockk-guidebook/docs/tips/chains/"><del>Chains</del></a></li>
<li>
  <a href="/mockk-guidebook/docs/tips/timeout/"><del>Timeouts</del></a></li>
<li>
  <a href="/mockk-guidebook/docs/tips/exclude/"><del>Exclude recording</del></a></li>
</ul>
</li>
<li>
  <a href="/mockk-guidebook/docs/method-index/">Method index</a></li>
</ul>






  
<ul>
  
  <li>
    <a href="https://github.com/NotWoods/mockk-guidebook/" target="_blank" rel="noopener">
        Github
      </a>
  </li>
  
</ul>






</nav>




  <script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script>


 
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/mockk-guidebook/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <label for="toc-control">
    
    <img src="/mockk-guidebook/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  <nav id="TableOfContents">
  <ul>
    <li><a href="#argumentcaptor"><code>ArgumentCaptor</code></a>
      <ul>
        <li><a href="#inline-assertions">Inline assertions</a></li>
      </ul>
    </li>
  </ul>
</nav>


  </aside>
  
 
      </header>

      <div class="dark" data-ea-publisher="notwoodsgithubio-mockk-guidebook" data-ea-type="text" id="content-ad" data-ea-manual="true"></div>

      
  <article class="markdown"><h1 id="argumentcaptor">
  <code>ArgumentCaptor</code>
  <a class="anchor" href="#argumentcaptor">#</a>
</h1>
<p>When you need to run additional assertions on an argument, the <code>ArgumentCaptor</code> is the tool for the job in Mockito. An <code>ArgumentCaptor</code> will keep track of arguments passed to a mocked method, then allow you to retreve the argument later.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#66d9ef">val</span> personArgument = ArgumentCaptor.forClass(Person<span style="color:#f92672">::</span><span style="color:#66d9ef">class</span>.java)

verify(mockPhone).call(personArgument.capture())

assertEquals(<span style="color:#e6db74">&#34;Sarah Jane&#34;</span>, personArgument.value.name)
</code></pre></div><p>MockK has a similar 
  <a href="/mockk-guidebook/docs/matching/capture/">utility called a <code>CapturingSlot</code></a>. The functionality is very similar to Mockito, but the usage is different. Rather than calling the method <code>argumentCaptor.capture()</code> to create a argument matcher, you wrap the slot in a <code>capture()</code> function. You access the captured value using the <code>slot.captured</code> property rather than the <code>argumentCaptor.value</code> getter.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin"><span style="color:#66d9ef">val</span> personSlot = slot&lt;Person&gt;()

every { mockPhone.call(capture(personSlot)) }

assertEquals(<span style="color:#e6db74">&#34;Sarah Jane&#34;</span>, personSlot.captured.name)
</code></pre></div><p>As an alternative to <code>CapturingSlot</code>, a <code>MutableList</code> can be used to store captured arguments. Simply pass an instance of a mutable list to <code>capture</code> instead of the slot. This allows you to record all captured values, as <code>CapturingSlot</code> only records the most recent value.</p>
<h2 id="inline-assertions">
  Inline assertions
  <a class="anchor" href="#inline-assertions">#</a>
</h2>
<p>It turns out that there is an even simpler way to run assertions on an argument in MockK. The 
  <a href="/mockk-guidebook/docs/matching/with/"><code>withArg</code> function</a> is an argument matcher that takes a lambda that will be executed when the mocked function is called, with the argument passed to the lambda. This allows you to run assertions without managing argument captors or capturing slots.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin">every {
  mockPhone.call(withArg { person <span style="color:#f92672">-&gt;</span>
    assertEquals(<span style="color:#e6db74">&#34;Sarah Jane&#34;</span>, person.captured.name)
  })
}
</code></pre></div><p>When dealing with one-off assertions, <code>withArg</code> will do everything you need with less code.</p>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">



  <div><a class="flex align-center" href="https://github.com/NotWoods/mockk-guidebook//commit/aa46002cdeb48d9a6be0a77338839f362fe0cd45" title='Last modified by Tiger Oakes | December 15, 2020' target="_blank" rel="noopener">
      <img src="/mockk-guidebook/svg/calendar.svg" class="book-icon" alt="Calendar" />
      <span>December 15, 2020</span>
    </a>
  </div>



  <div>
    <a class="flex align-center" href="https://github.com/NotWoods/mockk-guidebook//edit/main/content/docs/mockito-migrate/argument-captor.md" target="_blank" rel="noopener">
      <img src="/mockk-guidebook/svg/edit.svg" class="book-icon" alt="Edit" />
      <span>Edit this page</span>
    </a>
  </div>

</div>

 
        
      </footer>

      
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <nav class="book-toc-inner">
        
  <nav id="TableOfContents">
  <ul>
    <li><a href="#argumentcaptor"><code>ArgumentCaptor</code></a>
      <ul>
        <li><a href="#inline-assertions">Inline assertions</a></li>
      </ul>
    </li>
  </ul>
</nav>

 
        <div class="dark" data-ea-publisher="notwoodsgithubio-mockk-guidebook" data-ea-type="image" id="toc-sidebar-ad" data-ea-manual="true"></div>

      </nav>
    </aside>
    
  </main>

  <script src="https://getinsights.io/static/js/insights.js"></script>
<script>
    insights.init("dRGDHrNTA8KoTJ07");
    insights.trackPages();
</script>

</body>

</html>












